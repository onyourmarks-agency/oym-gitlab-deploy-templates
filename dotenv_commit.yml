variables:
  PRODUCTION_ENV_FILE: .env.production
  STAGING_ENV_FILE: .env.staging

dotenv_commit:
  stage: build
  variables:
    GIT_STRATEGY: fetch
  needs: [ ]
  dependencies: [ ]
  artifacts:
    paths:
      - '.env*'
  script:
    - 'sed -i "s/\$VAR_COMMIT_ID/$CI_COMMIT_SHORT_SHA/" $PRODUCTION_ENV_FILE'
    - 'sed -i "s/\$VAR_COMMIT_ID/$CI_COMMIT_SHORT_SHA/" $STAGING_ENV_FILE'
